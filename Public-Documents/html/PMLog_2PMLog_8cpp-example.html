<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ADL (AMD Display Library) Public APIs: PMLog/PMLog.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PMLog/PMLog.cpp</h1>A C/C++ Sample Application for Windows (XP, Vista and above); 32bit and 64bit <br>
 Visual Studio 2017 solution file <b> "pmlog.sln" </b> is included in ADL SDK<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;tchar.h&gt;</span>

 



<span class="preprocessor">#include &lt;windows.h&gt;</span>
<span class="preprocessor">#include &lt;sys\timeb.h&gt;</span>
<span class="preprocessor">#include &lt;signal.h&gt;</span>

<span class="preprocessor">#include "..\..\include\adl_sdk.h"</span>
<span class="preprocessor">#include "..\..\include\adl_structures.h"</span>
<span class="preprocessor">#include "..\..\include\adl_defines.h"</span>


<span class="preprocessor">#include &lt;stdio.h&gt;</span>

<span class="comment">// Comment out one of the two lines below to allow or supress diagnostic messages</span>
<span class="comment">// #define PRINTF</span>
<span class="preprocessor">#define PRINTF printf</span>
<span class="preprocessor"></span>
<span class="comment">// Definitions of the used function pointers. Add more if you use other ADL APIs</span>
<span class="keyword">typedef</span> int ( *ADL_MAIN_CONTROL_CREATE )(<a name="a0"></a><a class="code" href="adl__sdk_8h.html#f19f99637fc200b5324dd7e7561eecd1" title="Memory Allocation Call back.">ADL_MAIN_MALLOC_CALLBACK</a>, int );
<span class="keyword">typedef</span> int ( *ADL_MAIN_CONTROL_DESTROY )();
<span class="keyword">typedef</span> int ( *ADL_FLUSH_DRIVER_DATA)(int);
<span class="keyword">typedef</span> int (*ADL2_ADAPTER_ACTIVE_GET ) (<a name="a1"></a><a class="code" href="adl__structures_8h.html#81b5ad958ff0093538e67865860ced65" title="Handle to ADL client context.">ADL_CONTEXT_HANDLE</a>, int, <span class="keywordtype">int</span>* );

<span class="keyword">typedef</span> int ( *ADL_ADAPTER_NUMBEROFADAPTERS_GET ) ( <span class="keywordtype">int</span>* );
<span class="keyword">typedef</span> int ( *ADL_ADAPTER_ADAPTERINFO_GET ) ( <a name="_a2"></a><a class="code" href="structAdapterInfo.html" title="Structure containing information about the graphics adapter.">LPAdapterInfo</a>, int );
<span class="keyword">typedef</span> int(*ADL2_ADAPTER_PMLOG_SUPPORT_GET) (<a class="code" href="adl__structures_8h.html#81b5ad958ff0093538e67865860ced65" title="Handle to ADL client context.">ADL_CONTEXT_HANDLE</a> context, <span class="keywordtype">int</span> iAdapterIndex, <a name="_a3"></a><a class="code" href="struct__ADLPMLogSupportInfo.html">ADLPMLogSupportInfo</a>* pPMLogSupportInfo);
<span class="keyword">typedef</span> int(*ADL2_ADAPTER_PMLOG_SUPPORT_START) (<a class="code" href="adl__structures_8h.html#81b5ad958ff0093538e67865860ced65" title="Handle to ADL client context.">ADL_CONTEXT_HANDLE</a> context, <span class="keywordtype">int</span> iAdapterIndex, <a name="_a4"></a><a class="code" href="struct__ADLPMLogStartInput.html" title="Structure containing information to start power management logging.">ADLPMLogStartInput</a>* pPMLogStartInput, <a name="_a5"></a><a class="code" href="struct__ADLPMLogStartOutput.html" title="Structure containing information to start power management logging.">ADLPMLogStartOutput</a>* pPMLogStartOutput, <a name="a6"></a><a class="code" href="group__define__D3DKMT__HANDLE.html#g4dcdb9d1c4af78791ea518c36f381fff" title="Handle can be used to create Device Handle when using CreateDevice().">ADL_D3DKMT_HANDLE</a> pDevice);
<span class="keyword">typedef</span> int(*ADL2_ADAPTER_PMLOG_SUPPORT_STOP) (<a class="code" href="adl__structures_8h.html#81b5ad958ff0093538e67865860ced65" title="Handle to ADL client context.">ADL_CONTEXT_HANDLE</a> context, <span class="keywordtype">int</span> iAdapterIndex, <a class="code" href="group__define__D3DKMT__HANDLE.html#g4dcdb9d1c4af78791ea518c36f381fff" title="Handle can be used to create Device Handle when using CreateDevice().">ADL_D3DKMT_HANDLE</a> pDevice);
<span class="keyword">typedef</span> int(*ADL2_DEVICE_PMLOG_DEVICE_CREATE) (<a class="code" href="adl__structures_8h.html#81b5ad958ff0093538e67865860ced65" title="Handle to ADL client context.">ADL_CONTEXT_HANDLE</a> context, <span class="keywordtype">int</span> iAdapterIndex, <a class="code" href="group__define__D3DKMT__HANDLE.html#g4dcdb9d1c4af78791ea518c36f381fff" title="Handle can be used to create Device Handle when using CreateDevice().">ADL_D3DKMT_HANDLE</a> *pDevice);
<span class="keyword">typedef</span> int(*ADL2_DEVICE_PMLOG_DEVICE_DESTROY) (<a class="code" href="adl__structures_8h.html#81b5ad958ff0093538e67865860ced65" title="Handle to ADL client context.">ADL_CONTEXT_HANDLE</a> context, <a class="code" href="group__define__D3DKMT__HANDLE.html#g4dcdb9d1c4af78791ea518c36f381fff" title="Handle can be used to create Device Handle when using CreateDevice().">ADL_D3DKMT_HANDLE</a> hDevice);
HINSTANCE hDLL;

<a class="code" href="group__define__D3DKMT__HANDLE.html#g4dcdb9d1c4af78791ea518c36f381fff" title="Handle can be used to create Device Handle when using CreateDevice().">ADL_D3DKMT_HANDLE</a> hDevice = 0;

ADL_MAIN_CONTROL_CREATE          <a name="a7"></a><a class="code" href="group__MAINAPI.html#gbd3262ed253d0f47e41a6983ed3645c9" title="Function to initialize the ADL interface. This function should be called first.">ADL_Main_Control_Create</a> = NULL;
ADL_MAIN_CONTROL_DESTROY         <a name="a8"></a><a class="code" href="group__MAINAPI.html#g6109d29a69f5e52c28f7e5ede0afb38c" title="Function to destroy ADL global pointers. This function should be called last.">ADL_Main_Control_Destroy</a> = NULL;
ADL_ADAPTER_NUMBEROFADAPTERS_GET <a name="a9"></a><a class="code" href="group__ADAPTER.html#g16c0a744d9bfba9db1030326715f78a1" title="Function to retrieve the number of OS-known adapters.">ADL_Adapter_NumberOfAdapters_Get</a> = NULL;
ADL_ADAPTER_ADAPTERINFO_GET      <a name="a10"></a><a class="code" href="group__ADAPTER.html#gd305c0548224ab4623e1b89965b14f6b" title="Retrieves all OS-known adapter information.">ADL_Adapter_AdapterInfo_Get</a> = NULL;
ADL2_ADAPTER_ACTIVE_GET                         <a name="a11"></a><a class="code" href="group__ADAPTER.html#gc2ac6c29a7cf441689cccad2b887729d" title="Function to determine if the adapter is active or not.">ADL2_Adapter_Active_Get</a>=NULL;
ADL2_ADAPTER_PMLOG_SUPPORT_GET <a name="a12"></a><a class="code" href="adapter_8h.html#a990ac2a732af842584fb07863c6514e" title="Function to retrieve power management logging support.">ADL2_Adapter_PMLog_Support_Get</a> = NULL;
ADL2_ADAPTER_PMLOG_SUPPORT_START ADL2_Adapter_PMLog_Support_Start = NULL;
ADL2_ADAPTER_PMLOG_SUPPORT_STOP ADL2_Adapter_PMLog_Support_Stop = NULL;
ADL2_DEVICE_PMLOG_DEVICE_CREATE <a name="a13"></a><a class="code" href="group__OVERDRIVE8.html#g14bcd4cfe2e7e6e6af9be8f0287c6199" title="This function create the device. Adds MGPU support over legacy functions.">ADL2_Device_PMLog_Device_Create</a> = NULL;
ADL2_DEVICE_PMLOG_DEVICE_DESTROY <a name="a14"></a><a class="code" href="group__OVERDRIVE8.html#g03d21d3e098d73bb583bb2b77144817c" title="This function destroy the device. Adds MGPU support over legacy functions.">ADL2_Device_PMLog_Device_Destroy</a> = NULL;
<span class="comment">// Memory allocation function</span>
<span class="keywordtype">void</span>* <a name="a15"></a><a class="code" href="adl__sdk_8h.html#d16f14718feefaa629b3b7601ac9fdeb">__stdcall</a> ADL_Main_Memory_Alloc ( <span class="keywordtype">int</span> iSize )
{
    <span class="keywordtype">void</span>* lpBuffer = malloc ( iSize );
    <span class="keywordflow">return</span> lpBuffer;
}

<span class="comment">// Optional Memory de-allocation function</span>
<span class="keywordtype">void</span> <a class="code" href="adl__sdk_8h.html#d16f14718feefaa629b3b7601ac9fdeb">__stdcall</a> ADL_Main_Memory_Free ( <span class="keywordtype">void</span>** lpBuffer )
{
    <span class="keywordflow">if</span> ( NULL != *lpBuffer )
    {
        free ( *lpBuffer );
        *lpBuffer = NULL;
    }
}

<a class="code" href="adl__structures_8h.html#81b5ad958ff0093538e67865860ced65" title="Handle to ADL client context.">ADL_CONTEXT_HANDLE</a> context = NULL;

<a class="code" href="structAdapterInfo.html" title="Structure containing information about the graphics adapter.">LPAdapterInfo</a>   lpAdapterInfo = NULL;
<span class="keywordtype">int</span>  iNumberAdapters;

<span class="keywordtype">int</span> initializeADL()
{
        
        <span class="comment">// Load the ADL dll</span>
        hDLL = LoadLibrary(TEXT(<span class="stringliteral">"atiadlxx.dll"</span>));
        <span class="keywordflow">if</span> (hDLL == NULL)
        {
                <span class="comment">// A 32 bit calling application on 64 bit OS will fail to LoadLibrary.</span>
                <span class="comment">// Try to load the 32 bit library (atiadlxy.dll) instead</span>
                hDLL = LoadLibrary(TEXT(<span class="stringliteral">"atiadlxy.dll"</span>));
        }
        
        <span class="keywordflow">if</span> (NULL == hDLL)
        {
                PRINTF(<span class="stringliteral">"Failed to load ADL library\n"</span>);
                <span class="keywordflow">return</span> FALSE;
        }
        <a class="code" href="group__MAINAPI.html#gbd3262ed253d0f47e41a6983ed3645c9" title="Function to initialize the ADL interface. This function should be called first.">ADL_Main_Control_Create</a> = (ADL_MAIN_CONTROL_CREATE) GetProcAddress(hDLL,<span class="stringliteral">"ADL_Main_Control_Create"</span>);
        <a class="code" href="group__MAINAPI.html#g6109d29a69f5e52c28f7e5ede0afb38c" title="Function to destroy ADL global pointers. This function should be called last.">ADL_Main_Control_Destroy</a> = (ADL_MAIN_CONTROL_DESTROY) GetProcAddress(hDLL,<span class="stringliteral">"ADL_Main_Control_Destroy"</span>);
        <a class="code" href="group__ADAPTER.html#g16c0a744d9bfba9db1030326715f78a1" title="Function to retrieve the number of OS-known adapters.">ADL_Adapter_NumberOfAdapters_Get</a> = (ADL_ADAPTER_NUMBEROFADAPTERS_GET) GetProcAddress(hDLL,<span class="stringliteral">"ADL_Adapter_NumberOfAdapters_Get"</span>);
        <a class="code" href="group__ADAPTER.html#gd305c0548224ab4623e1b89965b14f6b" title="Retrieves all OS-known adapter information.">ADL_Adapter_AdapterInfo_Get</a> = (ADL_ADAPTER_ADAPTERINFO_GET) GetProcAddress(hDLL,<span class="stringliteral">"ADL_Adapter_AdapterInfo_Get"</span>);
        <a class="code" href="group__ADAPTER.html#gc2ac6c29a7cf441689cccad2b887729d" title="Function to determine if the adapter is active or not.">ADL2_Adapter_Active_Get</a> = (ADL2_ADAPTER_ACTIVE_GET)GetProcAddress(hDLL, <span class="stringliteral">"ADL2_Adapter_Active_Get"</span>);
        <a class="code" href="adapter_8h.html#a990ac2a732af842584fb07863c6514e" title="Function to retrieve power management logging support.">ADL2_Adapter_PMLog_Support_Get</a> = (ADL2_ADAPTER_PMLOG_SUPPORT_GET)GetProcAddress(hDLL, <span class="stringliteral">"ADL2_Adapter_PMLog_Support_Get"</span>);
        ADL2_Adapter_PMLog_Support_Start = (ADL2_ADAPTER_PMLOG_SUPPORT_START)GetProcAddress(hDLL, <span class="stringliteral">"ADL2_Adapter_PMLog_Start"</span>);
        ADL2_Adapter_PMLog_Support_Stop = (ADL2_ADAPTER_PMLOG_SUPPORT_STOP)GetProcAddress(hDLL, <span class="stringliteral">"ADL2_Adapter_PMLog_Stop"</span>);
        <a class="code" href="group__OVERDRIVE8.html#g14bcd4cfe2e7e6e6af9be8f0287c6199" title="This function create the device. Adds MGPU support over legacy functions.">ADL2_Device_PMLog_Device_Create</a> = (ADL2_DEVICE_PMLOG_DEVICE_CREATE)GetProcAddress(hDLL, <span class="stringliteral">"ADL2_Device_PMLog_Device_Create"</span>);
        <a class="code" href="group__OVERDRIVE8.html#g03d21d3e098d73bb583bb2b77144817c" title="This function destroy the device. Adds MGPU support over legacy functions.">ADL2_Device_PMLog_Device_Destroy</a> = (ADL2_DEVICE_PMLOG_DEVICE_DESTROY)GetProcAddress(hDLL, <span class="stringliteral">"ADL2_Device_PMLog_Device_Destroy"</span>);
        <span class="keywordflow">if</span> ( NULL == <a class="code" href="group__MAINAPI.html#gbd3262ed253d0f47e41a6983ed3645c9" title="Function to initialize the ADL interface. This function should be called first.">ADL_Main_Control_Create</a> ||
                 NULL == <a class="code" href="group__MAINAPI.html#g6109d29a69f5e52c28f7e5ede0afb38c" title="Function to destroy ADL global pointers. This function should be called last.">ADL_Main_Control_Destroy</a> ||
                 NULL == <a class="code" href="group__ADAPTER.html#g16c0a744d9bfba9db1030326715f78a1" title="Function to retrieve the number of OS-known adapters.">ADL_Adapter_NumberOfAdapters_Get</a>||
                 NULL == <a class="code" href="group__ADAPTER.html#gd305c0548224ab4623e1b89965b14f6b" title="Retrieves all OS-known adapter information.">ADL_Adapter_AdapterInfo_Get</a> ||
                 NULL == <a class="code" href="group__ADAPTER.html#gc2ac6c29a7cf441689cccad2b887729d" title="Function to determine if the adapter is active or not.">ADL2_Adapter_Active_Get</a> ||
                 NULL == <a class="code" href="adapter_8h.html#a990ac2a732af842584fb07863c6514e" title="Function to retrieve power management logging support.">ADL2_Adapter_PMLog_Support_Get</a> ||
                 NULL == ADL2_Adapter_PMLog_Support_Start ||
                 NULL == ADL2_Adapter_PMLog_Support_Stop ||
                 NULL == <a class="code" href="group__OVERDRIVE8.html#g14bcd4cfe2e7e6e6af9be8f0287c6199" title="This function create the device. Adds MGPU support over legacy functions.">ADL2_Device_PMLog_Device_Create</a> ||
                 NULL == <a class="code" href="group__OVERDRIVE8.html#g03d21d3e098d73bb583bb2b77144817c" title="This function destroy the device. Adds MGPU support over legacy functions.">ADL2_Device_PMLog_Device_Destroy</a>
                )
        {
                PRINTF(<span class="stringliteral">"Failed to get ADL function pointers\n"</span>);
                <span class="keywordflow">return</span> FALSE;
        }

        <span class="keywordflow">if</span> (<a name="a16"></a><a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != <a class="code" href="group__MAINAPI.html#gbd3262ed253d0f47e41a6983ed3645c9" title="Function to initialize the ADL interface. This function should be called first.">ADL_Main_Control_Create</a>(ADL_Main_Memory_Alloc, 1))
        {
                printf(<span class="stringliteral">"Failed to initialize nested ADL2 context"</span>);
                <span class="keywordflow">return</span> <a name="a17"></a><a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }
        
        <span class="keywordflow">return</span> TRUE;
}

<span class="keywordtype">int</span> PMLogDestroyD3DDevice(<span class="keywordtype">int</span> adapterNumber, <a class="code" href="group__define__D3DKMT__HANDLE.html#g4dcdb9d1c4af78791ea518c36f381fff" title="Handle can be used to create Device Handle when using CreateDevice().">ADL_D3DKMT_HANDLE</a> hDevice)
{
        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != <a class="code" href="group__OVERDRIVE8.html#g03d21d3e098d73bb583bb2b77144817c" title="This function destroy the device. Adds MGPU support over legacy functions.">ADL2_Device_PMLog_Device_Destroy</a>(context, hDevice))
        {
                PRINTF(<span class="stringliteral">"Err: Failed to destory D3D device\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }

        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a>;
}

<span class="keywordtype">int</span> PMLogCreateD3DDevice(<span class="keywordtype">int</span> adapterNumber, <a class="code" href="group__define__D3DKMT__HANDLE.html#g4dcdb9d1c4af78791ea518c36f381fff" title="Handle can be used to create Device Handle when using CreateDevice().">ADL_D3DKMT_HANDLE</a> *hDevice)
{
        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != <a class="code" href="group__OVERDRIVE8.html#g14bcd4cfe2e7e6e6af9be8f0287c6199" title="This function create the device. Adds MGPU support over legacy functions.">ADL2_Device_PMLog_Device_Create</a>(context, lpAdapterInfo[adapterNumber].iAdapterIndex, hDevice))
        {
                PRINTF(<span class="stringliteral">"Err: Failed to create D3D device\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }

        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a>;
}

<span class="keywordtype">int</span> GetPMLogSupport(<span class="keywordtype">int</span> adapterNumber, <a class="code" href="struct__ADLPMLogSupportInfo.html">ADLPMLogSupportInfo</a> *adlPMLogSupportInfo)
{

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != <a class="code" href="adapter_8h.html#a990ac2a732af842584fb07863c6514e" title="Function to retrieve power management logging support.">ADL2_Adapter_PMLog_Support_Get</a>(context, lpAdapterInfo[adapterNumber].iAdapterIndex, adlPMLogSupportInfo))
        {
                PRINTF(<span class="stringliteral">"Err: Failed to get PMLog Support for adapter number: %d\n"</span>, adapterNumber);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }

        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a>;
}



<span class="keywordtype">int</span> PrintAllSupportedSensors()
{
        <a class="code" href="struct__ADLPMLogSupportInfo.html">ADLPMLogSupportInfo</a> adlPMLogSupportInfo;
        <span class="keywordtype">int</span>  i = 0, j = 0;

        <span class="comment">// Repeat for all available adapters in the system</span>
        <span class="keywordflow">for</span> (i = 0; i &lt; iNumberAdapters; i++)
        {
                <span class="keywordflow">if</span> (lpAdapterInfo[i].iBusNumber &gt; -1)
                {
                        <span class="keywordflow">if</span> (GetPMLogSupport(i, &amp;adlPMLogSupportInfo) == <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>)
                                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;

                        PRINTF(<span class="stringliteral">"Adapter number %d supported sensors:\n"</span>, i);
                        <span class="keywordflow">while</span> (adlPMLogSupportInfo.<a name="a18"></a><a class="code" href="struct__ADLPMLogSupportInfo.html#f7a1339a7fdf53790f840c72d2e1adbb" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[j] != <a name="a19"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>)
                        {

                                <span class="keywordflow">switch</span> (adlPMLogSupportInfo.<a class="code" href="struct__ADLPMLogSupportInfo.html#f7a1339a7fdf53790f840c72d2e1adbb" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[j])
                                {
                                        <span class="keywordflow">case</span> <a name="a20"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec4ef49ee6b144c1004bf2470a9e54f176">ADL_PMLOG_CLK_GFXCLK</a>:
                                                PRINTF(<span class="stringliteral">"Graphics Clock Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a21"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec88e38e42c3c050db9576c2e0dd87685a">ADL_PMLOG_CLK_MEMCLK</a>:
                                                PRINTF(<span class="stringliteral">"Memory Clock Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a22"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec787ff43996445037a116dcf762ed1978">ADL_PMLOG_CLK_SOCCLK</a>:
                                                PRINTF(<span class="stringliteral">"SOC Clock Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a23"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec15dbe52218d27e28b5e4cd050fd6b4f3">ADL_PMLOG_CLK_UVDCLK1</a>:
                                                PRINTF(<span class="stringliteral">"UVD1 Clock Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a24"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86deca4186d1ceabde84fa598f7a052a87a34">ADL_PMLOG_CLK_UVDCLK2</a>:
                                                PRINTF(<span class="stringliteral">"UVD2 Clock Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a25"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec9f6110ba185cda4f6c9c5e2a84697bb0">ADL_PMLOG_CLK_VCECLK</a>:
                                                PRINTF(<span class="stringliteral">"VCE Clock Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a26"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dece747c3b9db76416a23cfd6ac6822208f">ADL_PMLOG_CLK_VCNCLK</a>:
                                                PRINTF(<span class="stringliteral">"VCN Clock Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a27"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decf04be5c93893bb280e09a92bcbb2b05c">ADL_PMLOG_TEMPERATURE_EDGE</a>:
                                                PRINTF(<span class="stringliteral">"EDGE Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a28"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decf1a02da73622205561d0235a61599be9">ADL_PMLOG_TEMPERATURE_MEM</a>:
                                                PRINTF(<span class="stringliteral">"Memory Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a29"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec9b2854536f1bf2ce8f9903b339bc6906">ADL_PMLOG_TEMPERATURE_VRVDDC</a>:
                                                PRINTF(<span class="stringliteral">"VDDC VR Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a30"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec9c92a81a19fa5e4bef3b3811c3957e69">ADL_PMLOG_TEMPERATURE_VRSOC</a>:
                                                PRINTF(<span class="stringliteral">"SOC VR Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a31"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec13968d36fbf49f51ab07681193f4b39f">ADL_PMLOG_TEMPERATURE_VRMVDD</a>:
                                                PRINTF(<span class="stringliteral">"MVDD VR Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a32"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec2157f8fef112722cc52e3db4ad2d22d6">ADL_PMLOG_TEMPERATURE_VRMVDD0</a>:
                                                PRINTF(<span class="stringliteral">"MVDD0 VR Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a33"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decf4209a6819749a1ad02ad757d3ec090d">ADL_PMLOG_TEMPERATURE_VRMVDD1</a>:
                                                PRINTF(<span class="stringliteral">"MVDD1 VR Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a34"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dece7892d09778fe0141dffb387cc28ca33">ADL_PMLOG_TEMPERATURE_LIQUID</a>:
                                                PRINTF(<span class="stringliteral">"Liquid Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a35"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec0e4dd79e8b8558f763f8e38713426344">ADL_PMLOG_TEMPERATURE_PLX</a>:
                                                PRINTF(<span class="stringliteral">"PLX Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a36"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec7aa52f5f0282dc8f20d0b94159948bf4">ADL_PMLOG_FAN_RPM</a>:
                                                PRINTF(<span class="stringliteral">"Fan RPM Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a37"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decb0532080fb59b945b3938be8042dc1cf">ADL_PMLOG_FAN_PERCENTAGE</a>:
                                                PRINTF(<span class="stringliteral">"Fan Percentage Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a38"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec9617e74ce2b5548f544e49374eb34c96">ADL_PMLOG_SOC_VOLTAGE</a>:
                                                PRINTF(<span class="stringliteral">"SOC Voltage Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a39"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dece42ab3a99c814702e8cc4035e71d64ed">ADL_PMLOG_SOC_POWER</a>:
                                                PRINTF(<span class="stringliteral">"SOC Power Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a40"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec8587683c786e9c9e785a09d09979a644">ADL_PMLOG_SOC_CURRENT</a>:
                                                PRINTF(<span class="stringliteral">"SOC Current Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a41"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86deca46e7007e598848eb2f632a5f0742a27">ADL_PMLOG_INFO_ACTIVITY_GFX</a>:
                                                PRINTF(<span class="stringliteral">"GFX Activity Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a42"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec728aca66de9dc134588533a7dfea46b8">ADL_PMLOG_INFO_ACTIVITY_MEM</a>:
                                                PRINTF(<span class="stringliteral">"MEM Activity Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a43"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86deca6cf817bbf2240cddc90251450a7bd78">ADL_PMLOG_GFX_VOLTAGE</a>:
                                                PRINTF(<span class="stringliteral">"GFX Voltage Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a44"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec1fe8455b922214a2f50232ebe298b4be">ADL_PMLOG_MEM_VOLTAGE</a>:
                                                PRINTF(<span class="stringliteral">"MEM Voltage Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a45"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec341c50f52e34ac09a7a14792b83edc02">ADL_PMLOG_ASIC_POWER</a>:
                                                PRINTF(<span class="stringliteral">"Asic Power Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a46"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decaf06c22f57c6afb30f617d388e2d2c81">ADL_PMLOG_TEMPERATURE_HOTSPOT</a>:
                                                PRINTF(<span class="stringliteral">"HOTSPOT Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a47"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec4ff7494422843765b30a523eff4b93df">ADL_PMLOG_TEMPERATURE_GFX</a>:
                                                PRINTF(<span class="stringliteral">"GFX Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a48"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec80faa2d00092c24f6c22e1fede1495ce">ADL_PMLOG_TEMPERATURE_SOC</a>:
                                                PRINTF(<span class="stringliteral">"SOC Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a49"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decb40c0d55bd9eca4447eae1128375ab17">ADL_PMLOG_TEMPERATURE_CPU</a>:
                                                PRINTF(<span class="stringliteral">"CPU Temperature Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a50"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec1b11532618b6a69fbc3e5752adb8b5ad">ADL_PMLOG_GFX_POWER</a>:
                                                PRINTF(<span class="stringliteral">"GFX Power Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a51"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec69358e7075d802b3b6574cbdf7404ad9">ADL_PMLOG_GFX_CURRENT</a>:
                                                PRINTF(<span class="stringliteral">"GFX Current Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a52"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec0fdd38eda7d83cbc88f651ee23933956">ADL_PMLOG_CPU_POWER</a>:
                                                PRINTF(<span class="stringliteral">"CPU Power Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a53"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decd3678494f3bb6d583750b2b5bed3bc34">ADL_PMLOG_CLK_CPUCLK</a>:
                                                PRINTF(<span class="stringliteral">"CPU Clock Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a name="a54"></a><a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decb0f652fb925fe6058c4594daa5fdeef0">ADL_PMLOG_THROTTLER_STATUS</a>:
                                                PRINTF(<span class="stringliteral">"Throttler Status Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>:
                                                PRINTF(<span class="stringliteral">"End of Sensor Detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">default</span>:
                                                PRINTF(<span class="stringliteral">"ER: Uknown sensor detected\n"</span>);
                                                <span class="keywordflow">break</span>;
                                }
                                PRINTF(<span class="stringliteral">"ID: %d\n"</span>, adlPMLogSupportInfo.<a class="code" href="struct__ADLPMLogSupportInfo.html#f7a1339a7fdf53790f840c72d2e1adbb" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[j]);
                                j++;
                        }


                }

        }

        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a>;
}

<span class="keywordtype">void</span> DisplayPMLogOutput(<a name="_a55"></a><a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>* PMLogOutput, <span class="keywordtype">int</span> Duration)
{
        <span class="keyword">struct </span>timeb startTime, currentTime;
        <span class="keywordtype">int</span> diff;
        <span class="keywordtype">int</span> i;

        ftime(&amp;startTime);
        system(<span class="stringliteral">"cls"</span>);
        <span class="keywordflow">do</span> {
                i = 0;
                <span class="keywordflow">while</span> (PMLogOutput-&gt;<a name="a56"></a><a class="code" href="struct__ADLPMLogData.html#1cb611ad4891463e316eef91b70bc3e7" title="2D array of senesor and values">ulValues</a>[i][0] != <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>)
                {

                        <span class="keywordflow">switch</span> (PMLogOutput-&gt;<a class="code" href="struct__ADLPMLogData.html#1cb611ad4891463e316eef91b70bc3e7" title="2D array of senesor and values">ulValues</a>[i][0])
                        {
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec4ef49ee6b144c1004bf2470a9e54f176">ADL_PMLOG_CLK_GFXCLK</a>:
                                PRINTF(<span class="stringliteral">"Graphics Clock Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec88e38e42c3c050db9576c2e0dd87685a">ADL_PMLOG_CLK_MEMCLK</a>:
                                PRINTF(<span class="stringliteral">"Memory Clock Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec787ff43996445037a116dcf762ed1978">ADL_PMLOG_CLK_SOCCLK</a>:
                                PRINTF(<span class="stringliteral">"SOC Clock Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec15dbe52218d27e28b5e4cd050fd6b4f3">ADL_PMLOG_CLK_UVDCLK1</a>:
                                PRINTF(<span class="stringliteral">"UVD1 Clock Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86deca4186d1ceabde84fa598f7a052a87a34">ADL_PMLOG_CLK_UVDCLK2</a>:
                                PRINTF(<span class="stringliteral">"UVD2 Clock Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec9f6110ba185cda4f6c9c5e2a84697bb0">ADL_PMLOG_CLK_VCECLK</a>:
                                PRINTF(<span class="stringliteral">"VCE Clock Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dece747c3b9db76416a23cfd6ac6822208f">ADL_PMLOG_CLK_VCNCLK</a>:
                                PRINTF(<span class="stringliteral">"VCN Clock Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decf04be5c93893bb280e09a92bcbb2b05c">ADL_PMLOG_TEMPERATURE_EDGE</a>:
                                PRINTF(<span class="stringliteral">"EDGE Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decf1a02da73622205561d0235a61599be9">ADL_PMLOG_TEMPERATURE_MEM</a>:
                                PRINTF(<span class="stringliteral">"Memory Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec9b2854536f1bf2ce8f9903b339bc6906">ADL_PMLOG_TEMPERATURE_VRVDDC</a>:
                                PRINTF(<span class="stringliteral">"VDDC VR Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec9c92a81a19fa5e4bef3b3811c3957e69">ADL_PMLOG_TEMPERATURE_VRSOC</a>:
                                PRINTF(<span class="stringliteral">"SOC VR Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec13968d36fbf49f51ab07681193f4b39f">ADL_PMLOG_TEMPERATURE_VRMVDD</a>:
                                PRINTF(<span class="stringliteral">"MVDD VR Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec2157f8fef112722cc52e3db4ad2d22d6">ADL_PMLOG_TEMPERATURE_VRMVDD0</a>:
                                PRINTF(<span class="stringliteral">"MVDD0 VR Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decf4209a6819749a1ad02ad757d3ec090d">ADL_PMLOG_TEMPERATURE_VRMVDD1</a>:
                                PRINTF(<span class="stringliteral">"MVDD1 VR Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dece7892d09778fe0141dffb387cc28ca33">ADL_PMLOG_TEMPERATURE_LIQUID</a>:
                                PRINTF(<span class="stringliteral">"Liquid Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec0e4dd79e8b8558f763f8e38713426344">ADL_PMLOG_TEMPERATURE_PLX</a>:
                                PRINTF(<span class="stringliteral">"PLX Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec7aa52f5f0282dc8f20d0b94159948bf4">ADL_PMLOG_FAN_RPM</a>:
                                PRINTF(<span class="stringliteral">"Fan RPM Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decb0532080fb59b945b3938be8042dc1cf">ADL_PMLOG_FAN_PERCENTAGE</a>:
                                PRINTF(<span class="stringliteral">"Fan Percentage Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec9617e74ce2b5548f544e49374eb34c96">ADL_PMLOG_SOC_VOLTAGE</a>:
                                PRINTF(<span class="stringliteral">"SOC Voltage Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dece42ab3a99c814702e8cc4035e71d64ed">ADL_PMLOG_SOC_POWER</a>:
                                PRINTF(<span class="stringliteral">"SOC Power Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec8587683c786e9c9e785a09d09979a644">ADL_PMLOG_SOC_CURRENT</a>:
                                PRINTF(<span class="stringliteral">"SOC Current Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86deca46e7007e598848eb2f632a5f0742a27">ADL_PMLOG_INFO_ACTIVITY_GFX</a>:
                                PRINTF(<span class="stringliteral">"GFX Activity Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec728aca66de9dc134588533a7dfea46b8">ADL_PMLOG_INFO_ACTIVITY_MEM</a>:
                                PRINTF(<span class="stringliteral">"MEM Activity Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86deca6cf817bbf2240cddc90251450a7bd78">ADL_PMLOG_GFX_VOLTAGE</a>:
                                PRINTF(<span class="stringliteral">"GFX Voltage Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec1fe8455b922214a2f50232ebe298b4be">ADL_PMLOG_MEM_VOLTAGE</a>:
                                PRINTF(<span class="stringliteral">"MEM Voltage Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec341c50f52e34ac09a7a14792b83edc02">ADL_PMLOG_ASIC_POWER</a>:
                                PRINTF(<span class="stringliteral">"Asic Power Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decaf06c22f57c6afb30f617d388e2d2c81">ADL_PMLOG_TEMPERATURE_HOTSPOT</a>:
                                PRINTF(<span class="stringliteral">"HOTSPOT Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec4ff7494422843765b30a523eff4b93df">ADL_PMLOG_TEMPERATURE_GFX</a>:
                                PRINTF(<span class="stringliteral">"GFX Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec80faa2d00092c24f6c22e1fede1495ce">ADL_PMLOG_TEMPERATURE_SOC</a>:
                                PRINTF(<span class="stringliteral">"SOC Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decb40c0d55bd9eca4447eae1128375ab17">ADL_PMLOG_TEMPERATURE_CPU</a>:
                                PRINTF(<span class="stringliteral">"CPU Temperature Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec1b11532618b6a69fbc3e5752adb8b5ad">ADL_PMLOG_GFX_POWER</a>:
                                PRINTF(<span class="stringliteral">"GFX Power Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec69358e7075d802b3b6574cbdf7404ad9">ADL_PMLOG_GFX_CURRENT</a>:
                                PRINTF(<span class="stringliteral">"GFX Current Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec0fdd38eda7d83cbc88f651ee23933956">ADL_PMLOG_CPU_POWER</a>:
                                PRINTF(<span class="stringliteral">"CPU Power Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decd3678494f3bb6d583750b2b5bed3bc34">ADL_PMLOG_CLK_CPUCLK</a>:
                                PRINTF(<span class="stringliteral">"CPU Clock Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86decb0f652fb925fe6058c4594daa5fdeef0">ADL_PMLOG_THROTTLER_STATUS</a>:
                                PRINTF(<span class="stringliteral">"Throttler Status Sensor: "</span>);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>:
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">default</span>:
                                PRINTF(<span class="stringliteral">"Unknown Sensor Value: "</span>);
                                <span class="keywordflow">break</span>;
                        }

                        PRINTF(<span class="stringliteral">"%d\n"</span>, PMLogOutput-&gt;<a class="code" href="struct__ADLPMLogData.html#1cb611ad4891463e316eef91b70bc3e7" title="2D array of senesor and values">ulValues</a>[i][1]);
                        i++;
                }

                Sleep(500);
                system(<span class="stringliteral">"cls"</span>);
                ftime(&amp;currentTime);
                diff = (int)(currentTime.time - startTime.time);
        } <span class="keywordflow">while</span> (diff &lt; Duration);
}


<span class="keywordtype">int</span> PMLogAllSensorStart(<span class="keywordtype">int</span> adapterNumber, <span class="keywordtype">int</span> sampleRate, <span class="keywordtype">int</span> Duration)
{
        <a class="code" href="struct__ADLPMLogSupportInfo.html">ADLPMLogSupportInfo</a> adlPMLogSupportInfo;
        <a class="code" href="struct__ADLPMLogStartInput.html" title="Structure containing information to start power management logging.">ADLPMLogStartInput</a> adlPMLogStartInput;
        <a class="code" href="struct__ADLPMLogStartOutput.html" title="Structure containing information to start power management logging.">ADLPMLogStartOutput</a> adlPMLogStartOutput;
        <a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>* PMLogOutput;
        <span class="keywordtype">int</span> i = 0;

        <span class="keywordflow">if</span> (hDevice == 0)
        {
                <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != PMLogCreateD3DDevice(lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;hDevice))
                {
                        PRINTF(<span class="stringliteral">"Err: Failed to create D3D Device, can not start PMLOG\n"</span>);
                        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
                }
        }

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != GetPMLogSupport(lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;adlPMLogSupportInfo))
        {
                PRINTF(<span class="stringliteral">"Err: Failed to get supported sensors, can not start PMLOG\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }


        <span class="keywordflow">while</span> (adlPMLogSupportInfo.<a class="code" href="struct__ADLPMLogSupportInfo.html#f7a1339a7fdf53790f840c72d2e1adbb" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[i] != <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>)
        {
                adlPMLogStartInput.<a name="a57"></a><a class="code" href="struct__ADLPMLogStartInput.html#4179565ea493c30807694ea994e3d46e" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[i] = adlPMLogSupportInfo.<a class="code" href="struct__ADLPMLogSupportInfo.html#f7a1339a7fdf53790f840c72d2e1adbb" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[i];
                i++;
        }

        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#4179565ea493c30807694ea994e3d46e" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[i] = <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>;
        adlPMLogStartInput.<a name="a58"></a><a class="code" href="struct__ADLPMLogStartInput.html#f7a86d88efc42d2a4abf897a76f733d7" title="Sample rate in milliseconds.">ulSampleRate</a> = sampleRate;
        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != ADL2_Adapter_PMLog_Support_Start(context, lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;adlPMLogStartInput, &amp;adlPMLogStartOutput, hDevice))
        {
                PRINTF(<span class="stringliteral">"Failed to start PMLOG\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }


        PMLogOutput = (<a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>  *)(adlPMLogStartOutput.<a name="a59"></a><a class="code" href="struct__ADLPMLogStartOutput.html#6a7be30def12aa8265aee73b8841dca5">pLoggingAddress</a>);

        DisplayPMLogOutput(PMLogOutput, Duration);

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != ADL2_Adapter_PMLog_Support_Stop(context, lpAdapterInfo[adapterNumber].iAdapterIndex, hDevice))
        {
                PRINTF(<span class="stringliteral">"Failed to get PMLog Support\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }

        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a>;
}

<span class="keywordtype">int</span> PMLogMclkStart(<span class="keywordtype">int</span> adapterNumber, <span class="keywordtype">int</span> sampleRate, <span class="keywordtype">int</span> Duration)
{
        <a class="code" href="struct__ADLPMLogSupportInfo.html">ADLPMLogSupportInfo</a> adlPMLogSupportInfo;
        <a class="code" href="struct__ADLPMLogStartInput.html" title="Structure containing information to start power management logging.">ADLPMLogStartInput</a> adlPMLogStartInput;
        <a class="code" href="struct__ADLPMLogStartOutput.html" title="Structure containing information to start power management logging.">ADLPMLogStartOutput</a> adlPMLogStartOutput;
        <a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>* PMLogOutput;
        <span class="keywordtype">int</span> i = 0;

        <span class="keywordflow">if</span> (hDevice == 0)
        {
                <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != PMLogCreateD3DDevice(lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;hDevice))
                {
                        PRINTF(<span class="stringliteral">"Err: Failed to create D3D Device, can not start PMLOG\n"</span>);
                        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
                }
        }

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != GetPMLogSupport(lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;adlPMLogSupportInfo))
        {
                PRINTF(<span class="stringliteral">"Err: Failed to get supported sensors, can not start PMLOG\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }


        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#4179565ea493c30807694ea994e3d46e" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[0] = <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec88e38e42c3c050db9576c2e0dd87685a">ADL_PMLOG_CLK_MEMCLK</a>;


        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#4179565ea493c30807694ea994e3d46e" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[1] = <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>;
        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#f7a86d88efc42d2a4abf897a76f733d7" title="Sample rate in milliseconds.">ulSampleRate</a> = sampleRate;

        PRINTF(<span class="stringliteral">"Start MCLK PMGLOG\n"</span>);

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != ADL2_Adapter_PMLog_Support_Start(context, lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;adlPMLogStartInput, &amp;adlPMLogStartOutput, hDevice))
        {
                PRINTF(<span class="stringliteral">"Failed to start MCLK PMGLOG\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }


        PMLogOutput = (<a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>  *)(adlPMLogStartOutput.<a class="code" href="struct__ADLPMLogStartOutput.html#6a7be30def12aa8265aee73b8841dca5">pLoggingAddress</a>);

        DisplayPMLogOutput(PMLogOutput, Duration);

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != ADL2_Adapter_PMLog_Support_Stop(context, lpAdapterInfo[adapterNumber].iAdapterIndex, hDevice))
        {
                PRINTF(<span class="stringliteral">"Failed to get PMLog Support\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }

        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a>;
}

<span class="keywordtype">int</span> PMLogFanStart(<span class="keywordtype">int</span> adapterNumber, <span class="keywordtype">int</span> sampleRate, <span class="keywordtype">int</span> Duration)
{
        <a class="code" href="struct__ADLPMLogSupportInfo.html">ADLPMLogSupportInfo</a> adlPMLogSupportInfo;
        <a class="code" href="struct__ADLPMLogStartInput.html" title="Structure containing information to start power management logging.">ADLPMLogStartInput</a> adlPMLogStartInput;
        <a class="code" href="struct__ADLPMLogStartOutput.html" title="Structure containing information to start power management logging.">ADLPMLogStartOutput</a> adlPMLogStartOutput;
        <a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>* PMLogOutput;
        <span class="keywordtype">int</span> i = 0;

        <span class="keywordflow">if</span> (hDevice == 0)
        {
                <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != PMLogCreateD3DDevice(lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;hDevice))
                {
                        PRINTF(<span class="stringliteral">"Err: Failed to create D3D Device, can not start PMLOG\n"</span>);
                        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
                }
        }

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != GetPMLogSupport(lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;adlPMLogSupportInfo))
        {
                PRINTF(<span class="stringliteral">"Err: Failed to get supported sensors, can not start PMLOG\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }


        <span class="comment">//adlPMLogStartInput.usSensors[0] = ADL_PMLOG_CLK_MEMCLK;</span>
        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#4179565ea493c30807694ea994e3d46e" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[0] = <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec7aa52f5f0282dc8f20d0b94159948bf4">ADL_PMLOG_FAN_RPM</a>;

        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#4179565ea493c30807694ea994e3d46e" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[1] = <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>;
        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#f7a86d88efc42d2a4abf897a76f733d7" title="Sample rate in milliseconds.">ulSampleRate</a> = sampleRate;

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != ADL2_Adapter_PMLog_Support_Start(context, lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;adlPMLogStartInput, &amp;adlPMLogStartOutput, hDevice))
        {
                PRINTF(<span class="stringliteral">"Failed to start MCLK PMGLOG\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }


        PMLogOutput = (<a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>  *)(adlPMLogStartOutput.<a class="code" href="struct__ADLPMLogStartOutput.html#6a7be30def12aa8265aee73b8841dca5">pLoggingAddress</a>);

        DisplayPMLogOutput(PMLogOutput, Duration);

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != ADL2_Adapter_PMLog_Support_Stop(context, lpAdapterInfo[adapterNumber].iAdapterIndex, hDevice))
        {
                PRINTF(<span class="stringliteral">"Failed to get PMLog Support\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }

        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a>;
}

<span class="keywordtype">int</span> PMLogGfxClkStart(<span class="keywordtype">int</span> adapterNumber, <span class="keywordtype">int</span> sampleRate, <span class="keywordtype">int</span> Duration)
{
        <a class="code" href="struct__ADLPMLogSupportInfo.html">ADLPMLogSupportInfo</a> adlPMLogSupportInfo;
        <a class="code" href="struct__ADLPMLogStartInput.html" title="Structure containing information to start power management logging.">ADLPMLogStartInput</a> adlPMLogStartInput;
        <a class="code" href="struct__ADLPMLogStartOutput.html" title="Structure containing information to start power management logging.">ADLPMLogStartOutput</a> adlPMLogStartOutput;
        <a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>* PMLogOutput;
        <span class="keywordtype">int</span> i = 0;

        <span class="keywordflow">if</span> (hDevice == 0)
        {
                <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != PMLogCreateD3DDevice(lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;hDevice))
                {
                        PRINTF(<span class="stringliteral">"Err: Failed to create D3D Device, can not start PMLOG\n"</span>);
                        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
                }
        }

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != GetPMLogSupport(lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;adlPMLogSupportInfo))
        {
                PRINTF(<span class="stringliteral">"Err: Failed to get supported sensors, can not start PMLOG\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }

        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#4179565ea493c30807694ea994e3d46e" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[0] = <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec4ef49ee6b144c1004bf2470a9e54f176">ADL_PMLOG_CLK_GFXCLK</a>;

        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#4179565ea493c30807694ea994e3d46e" title="list of sensors defined by ADL_PMLOG_SENSORS">usSensors</a>[1] = <a class="code" href="group__DEFINES.html#ggf6d6f77f520be4456f46f528c1a86dec29b3cd5d4592104ffc4cdb94796377f2">ADL_SENSOR_MAXTYPES</a>;
        adlPMLogStartInput.<a class="code" href="struct__ADLPMLogStartInput.html#f7a86d88efc42d2a4abf897a76f733d7" title="Sample rate in milliseconds.">ulSampleRate</a> = sampleRate;

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != ADL2_Adapter_PMLog_Support_Start(context, lpAdapterInfo[adapterNumber].iAdapterIndex, &amp;adlPMLogStartInput, &amp;adlPMLogStartOutput, hDevice))
        {
                PRINTF(<span class="stringliteral">"Failed to start MCLK PMGLOG\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }


        PMLogOutput = (<a class="code" href="struct__ADLPMLogData.html">ADLPMLogData</a>  *)(adlPMLogStartOutput.<a class="code" href="struct__ADLPMLogStartOutput.html#6a7be30def12aa8265aee73b8841dca5">pLoggingAddress</a>);

        DisplayPMLogOutput(PMLogOutput, Duration);

        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != ADL2_Adapter_PMLog_Support_Stop(context, lpAdapterInfo[adapterNumber].iAdapterIndex, hDevice))
        {
                PRINTF(<span class="stringliteral">"Failed to get PMLog Support\n"</span>);
                <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g917345ca58ec6b4d7c73865fdb611fd7" title="Generic Error. Most likely one or more of the Escape calls to the driver failed!">ADL_ERR</a>;
        }

        <span class="keywordflow">return</span> <a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a>;
}

<span class="keywordtype">void</span> deinitializeADL()
{
                
        <a class="code" href="group__MAINAPI.html#g6109d29a69f5e52c28f7e5ede0afb38c" title="Function to destroy ADL global pointers. This function should be called last.">ADL_Main_Control_Destroy</a>();
        
        FreeLibrary(hDLL);


}

<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])
{
        <span class="keywordtype">int</span> result = 0;

        <span class="keywordflow">if</span> (initializeADL())
        {
                <span class="keywordflow">if</span> (argc &gt; 1)
                {
                        <span class="comment">// Obtain the number of adapters for the system</span>
                        <span class="keywordflow">if</span> (<a class="code" href="group__define__adl__results.html#g29dfbfcc4a3b9092febd107586668a75" title="ADL function completed successfully.">ADL_OK</a> != <a class="code" href="group__ADAPTER.html#g16c0a744d9bfba9db1030326715f78a1" title="Function to retrieve the number of OS-known adapters.">ADL_Adapter_NumberOfAdapters_Get</a>(&amp;iNumberAdapters))
                        {
                                PRINTF(<span class="stringliteral">"Cannot get the number of adapters!\n"</span>);
                                <span class="keywordflow">return</span> 0;
                        }

                        <span class="keywordflow">if</span> (0 &lt; iNumberAdapters)
                        {
                                lpAdapterInfo = (<a class="code" href="structAdapterInfo.html" title="Structure containing information about the graphics adapter.">LPAdapterInfo</a>)malloc(<span class="keyword">sizeof</span> (<a class="code" href="structAdapterInfo.html" title="Structure containing information about the graphics adapter.">AdapterInfo</a>)* iNumberAdapters);
                                memset(lpAdapterInfo, <span class="charliteral">'\0'</span>, <span class="keyword">sizeof</span> (<a class="code" href="structAdapterInfo.html" title="Structure containing information about the graphics adapter.">AdapterInfo</a>)* iNumberAdapters);

                                <span class="comment">// Get the AdapterInfo structure for all adapters in the system</span>
                                <a class="code" href="group__ADAPTER.html#gd305c0548224ab4623e1b89965b14f6b" title="Retrieves all OS-known adapter information.">ADL_Adapter_AdapterInfo_Get</a>(lpAdapterInfo, <span class="keyword">sizeof</span> (<a class="code" href="structAdapterInfo.html" title="Structure containing information about the graphics adapter.">AdapterInfo</a>)* iNumberAdapters);
                        }

                        <span class="keywordflow">switch</span> (*(argv[1]))
                        {
                                <span class="keywordflow">case</span> <span class="charliteral">'l'</span>:
                                        result = PrintAllSupportedSensors();
                                        <span class="keywordflow">break</span>;
                                <span class="keywordflow">case</span> <span class="charliteral">'s'</span>:
                                         <span class="keywordflow">if</span> (argc == 5)
                                                 PMLogAllSensorStart(atoi(argv[2]), atoi(argv[3]), atoi(argv[4]));
                                        <span class="keywordflow">else</span>
                                                printf(<span class="stringliteral">"signature of PMLog all sensors (PMLog.exe s X Y Z); X - Adapter Number, Y - Sample Rate (ms), Z - Duration to Log"</span>);
                                        <span class="keywordflow">break</span>;
                                <span class="keywordflow">case</span> <span class="charliteral">'m'</span>:
                                        <span class="keywordflow">if</span> (argc == 5)
                                                PMLogMclkStart(atoi(argv[2]), atoi(argv[3]), atoi(argv[4]));
                                        <span class="keywordflow">else</span>
                                                printf(<span class="stringliteral">"signature of PMLog MCLK sensor (PMLog.exe m X Y Z); X - Adapter Number, Y - Sample Rate (ms), Z - Duration to Log"</span>);
                                        <span class="keywordflow">break</span>;
                                <span class="keywordflow">case</span> <span class="charliteral">'f'</span>:
                                        <span class="keywordflow">if</span> (argc == 5)
                                                PMLogFanStart(atoi(argv[2]), atoi(argv[3]), atoi(argv[4]));
                                        <span class="keywordflow">else</span>
                                                printf(<span class="stringliteral">"signature of PMLog fan sensor (PMLog.exe f X Y Z); X - Adapter Number, Y - Sample Rate (ms), Z - Duration to Log"</span>);
                                        <span class="keywordflow">break</span>;
                                <span class="keywordflow">case</span> <span class="charliteral">'g'</span>:
                                        <span class="keywordflow">if</span> (argc == 5)
                                                PMLogGfxClkStart(atoi(argv[2]), atoi(argv[3]), atoi(argv[4]));
                                        <span class="keywordflow">else</span>
                                                printf(<span class="stringliteral">"signature of PMLog GFX clock sensor (PMLog.exe g X Y Z); X - Adapter Number, Y - Sample Rate (ms), Z - Duration to Log"</span>);
                                        <span class="keywordflow">break</span>;
                                        
                                <span class="keywordflow">default</span>:
                                        printf (<span class="stringliteral">"Available command line parameters: l- List All sensors, s-start log all sensors, m-start log MCLK sensor, f-start fan sensor, g-start GFX clock sensor\n"</span>);
                
                                        <span class="keywordflow">break</span>;
                        }
                }
                <span class="keywordflow">else</span>
                {
                                        printf (<span class="stringliteral">"Available command line parameters: l- List All sensors, s-start log all sensors, m-start log MCLK sensor, f-start fan sensor, g-start GFX clock sensor\n"</span>);
                }

                ADL_Main_Memory_Free((<span class="keywordtype">void</span>**)&amp;lpAdapterInfo);

                deinitializeADL();
        }

        <span class="keywordflow">return</span> result;
}
</pre></div> </div>
<hr size="1"><div  style="text-align: right;"><small>Copyright &copy 2009-2016 Advanced Micro Devices, Inc. All rights reserved.&nbsp;
<a href="http://developer.amd.com"><img src="53863A_AMD_E_Blk_RGB.PNG" title="developer.amd.com" align="middle" border="0" height="10px"></a></small></div>
</body>
</html>
